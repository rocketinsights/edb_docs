---
title: "Migration Issues"
---

During the migration process, the migration summary displays the progress of the migration. If an error occurs, the summary will display information about the error. The migration summary is also written to a log file. The default locations for the log files are:

> On Linux:
>
> $HOME/.enterprisedb/migration-toolkit/logs
>
> On Windows, the log files are saved to:
>
> %HOMEDRIVE%%HOMEPATH%\\.enterprisedb\\migration-toolkit\\logs

You can specify an alternate log file directory with the -logdir *log\_path* option in Migration Toolkit.

## Migration Toolkit Connection Errors

Migration Toolkit uses information from the toolkit.properties file to connect to the source and target databases. Most of the connection errors that occur when using Migration Toolkit are related to the information specified in the toolkit.properties file. Use the following section to identify common connection errors, and learn how to resolve them.

For information about editing the toolkit.properties file, see Section 5, *Building the toolkit.properties file*.

### Invalid username/password

*When I try to perform a migration from an Oracle database with Migration Toolkit, I get the following error:*

MTK-11009: Error Connecting Database "Oracle"

DB-1017: java.sql.SQLException: ORA-01017: invalid username/password; logon denied

The user name or password specified in the toolkit.properties file is not valid to use to connect to the Oracle source database.

To resolve this error, edit the toolkit.properties file, specifying the name and password of a valid user with sufficient privileges to perform the migration in the SRC\_DB\_USER and SRC\_DB\_PASSWORD properties.

### Connection rejected: FATAL: password

*When I try to perform a migration with Migration Toolkit, I get the following error:*

MTK-11009: Error Connecting Database "Postgres Plus"

DB-28P01: com.edb.util.PSQLException: FATAL: password authentication failed for user "*name*"

The user name or password specified in the toolkit.properties file is not valid to use to connect to the Postgres database.

To resolve this error, edit the toolkit.properties file, specifying the name and password of a valid user with sufficient privileges to perform the migration in the TARGET\_DB\_USER and TARGET\_DB\_PASSWORD properties.

### Exception: ORA-28000: the account is locked

*When I try to perform a migration from an Oracle database with Migration Toolkit, I get the following error message:*

MTK-11009: Error Connecting Database "Oracle"

DB-28000: java.sql.SQLException: ORA-28000: the account is locked

The Oracle account associated with the user name specified in the toolkit.properties file is locked.

To resolve this error, you can either unlock the user account on the Oracle server or edit the toolkit.properties file, specifying the name and password of a valid user with sufficient privileges to perform the migration in the SRC\_DB\_USER and SRC\_DB\_PASSWORD parameters.

### Exception: oracle.jdbc.driver.OracleDriver

*When I try to perform a migration with Migration Toolkit, the migration fails and I get the error message:*

MTK-11009: Error Connecting Database "Oracle"

java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver

Before using Migration Toolkit, you must download and install the appropriate JDBC driver for the database that you are migrating from. See Section 4.3, *Installing Source-Specific Drivers* for complete instructions.

### I/O exception: The Network Adapter could not establish the connection

*When I try to perform a migration with Migration Toolkit, I get the following error:*

MTK-11009: Error Connecting Database "Oracle"

DB-17002: java.sql.SQLException: Io exception: The Network Adapter could not establish the connection

The JDBC URL for the source database specified in the toolkit.properties file contains invalid connection properties.

To resolve this error, edit the toolkit.properties file, specifying valid connection information for the source database in the SRC\_DB\_URL property. For information about forming a JDBC URL for your specific database, see Sections 5.1 through 5.6 of this document.

### Exception: The URL specified for the “target” database is invalid

*When I try to perform a migration with Migration Toolkit, I get the following error:*

MTK-10045: The URL specified for the "target" database is invalid.

Check the connectivity credentials.

The JDBC URL for the target database (Advanced Server) specified in the toolkit.properties file contains invalid connection properties.

To resolve this error, edit the toolkit.properties file, specifying valid connection information for the target database in the *TARGET*\_DB\_URL property. For information about forming a JDBC URL for Advanced Server, see section 5.1 of this document.

## Migration Toolkit Migration Errors

The following errors may occur after Migration Toolkit has successfully connected to the target and source database servers.

### ERROR: Extra Data after last expected column

*When migrating a table online, I get the error message:*

MTK-17001: Error Loading Data into Table: *table\_name*

DB-22P04: com.edb.util.PSQLException: ERROR: extra data after last expected column

Where: COPY *table\_name*, line 5: "50|HR|LOS|ANGELES"

This error occurs when the data in a column in *table\_name* includes the delimiter character. To correct this error, change the delimiter character to a character not found in the table contents.

**Note:** In this example, the pipe character (|) occurs in the text, LOS|ANGELES, intended for insertion into the last column, and the Migration Toolkit is run using the –copyDelimiter '|' option, which results in the error.

### Error Loading Data into Table: *TABLE\_NAME*

*When performing a data-only migration, I get the following error:*

MTK-17001: Error Loading Data into Table: *TABLE\_NAME*

DB-42P01: com.edb.util.PSQLException: ERROR: relation "*schema*.*table\_name*" does not exist

*I also get the error:*

Trying to reload table: *TABLE\_NAME* through bulk inserts with a batch size of 100

MTK-17001: Error Loading Data into Table: *TABLE\_NAME*

DB-42P01: com.edb.util.PSQLException: ERROR: relation "*schema*.*table\_name*" does not exist

You must create a table to receive the data in the target database before you can migrate the data. Verify that a table (with a name of *TABLE\_NAME* ) exists in the target database; create the table if necessary and re-try the data migration.

### Error Creating Constraint CONS\_NAME\_FK

*When I perform a table migration that includes indexes and constraints, I get the following error message:*

MTK-15001: Error Creating Constraint EMP\_DEPT\_FK

DB-42P01: com.edb.util.PSQLException: ERROR: relation "hr.departments" does not exist

Creating Constraint: EMP\_JOB\_FK

MTK-15001: Error Creating Constraint EMP\_JOB\_FK

DB-42P01: com.edb.util.PSQLException: ERROR: relation "hr.jobs" does not exist

Creating Constraint: EMP\_MANAGER\_FK

Schema HR imported with errors.

One or more schema objects could not be imported during the migration process. Please review the migration output for more details.

Migration logs have been saved to /home/user/.enterprisedb/migration-toolkit/logs

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* Migration Summary \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Tables: 1 out of 1

Constraints: 4 out of 6

Total objects: 7

Successful count: 5

Failed count: 2

Invalid count: 0

List of failed objects

\======================

Constraints

\--------------------

1\. HR.EMPLOYEES.EMP\_DEPT\_FK

2\. HR.EMPLOYEES.EMP\_JOB\_FK

The table you are migrating includes a foreign key constraint on a table that does not exist in the target database. Migration Toolkit creates the table, omitting the foreign key constraint.

You can avoid generating the error message by including the -skipFKConst option in the Migration Toolkit command.

### Error Loading Data into Table

*I've already migrated the table definition; when I try to migrate the data into the table, I get an error:*

MTK-17001: Error Loading Data into Table: DEPARTMENTS

DB-22P04: com.edb.util.PSQLException: ERROR: extra data after last expected column

Where: COPY departments, line 1: "10 Administration 200 1700"

Trying to reload table: DEPARTMENTS through bulk inserts with a batch size of 100

MTK-17000: Batch entry 0 INSERT INTO hr.DEPARTMENTS VALUES (10, 'Administration', 200, 1700); was aborted. Call getNextException to see the cause.

DB-42601: java.sql.BatchUpdateException: Batch entry 0 INSERT INTO hr.DEPARTMENTS VALUES (10, 'Administration', 200, 1700); was aborted. Call getNextException to see the cause., Skipping Batch

MTK-17000:ERROR: INSERT has more expressions than target columns

Position: 48

\[DEPARTMENTS\] Table Data Load Summary: Total Time(s): 0.037 Total Rows: 0

Data Load Summary: Total Time (sec): 0.168 Total Rows: 0 Total Size(MB): 0.0

Schema HR imported with errors.

The table definition (in the target database) does not match the migrated data. If you've altered the target or source table, confirm that the table definition and the data are compatible.

### ERROR: value too long for type

*I've already migrated the table definition; when I try to migrate the data into the table, I get the following error:*

MTK-17001: Error Loading Data into Table: DEPARTMENTS

DB-22001: com.edb.util.PSQLException: ERROR: value too long for type character(1)

Where: COPY departments, line 1, column location\_id: "1700"

Trying to reload table: DEPARTMENTS through bulk inserts with a batch size of 100

MTK-17000: Batch entry 0 INSERT INTO hr.DEPARTMENTS VALUES (10, 'Administration', 200, 1700); was aborted. Call getNextException to see the cause.

DB-22001: java.sql.BatchUpdateException: Batch entry 0 INSERT INTO hr.DEPARTMENTS VALUES (10, 'Administration', 200, 1700); was aborted. Call getNextException to see the cause., Skipping Batch

MTK-17000:ERROR: value too long for type character(1)

A column in the target database is not large enough to receive the migrated data; this problem could occur if the table definition is altered after migration. The column name (in our example, location\_id) is identified in the line that begins with 'Where:'.

Where: COPY departments, line 1, column location\_id: "1700"

To correct the problem, adjust the column size and re-try the migration.

### ERROR: Exception in thread:OutOfMemoryError

*When migrating from a MySQL database, I encounter the following error:*

Loading Table: big\_range ...

Exception in thread "dataload\_job\_1" java.lang.OutOfMemoryError: Java heap space

at com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1370)

at com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2369)

at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:451)

at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:2076)

at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1451)

at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1787)

at com.mysql.jdbc.Connection.execSQL(Connection.java:3277)

at com.mysql.jdbc.Connection.execSQL(Connection.java:3206)

at com.mysql.jdbc.Statement.executeQuery(Statement.java:1232)

at com.edb.dbhandler.mysql.Data.getTableData(Data.java:90)

at com.edb.DataLoader.loadDataInFastMode(DataLoader.java:594)

at com.edb.DataLoader.run(DataLoader.java:186)

at java.lang.Thread.run(Thread.java:722)

By default, the MySQL JDBC driver will fetch all of the rows that reside in a table into the client application (Migration Toolkit) in a single network round-trip. This behavior can easily exceed available memory for large tables.

To correct the problem, specify -fetchSize 1 as a command line argument when you re-try the migration.

## Unsupported Oracle Features

Advanced Server offers complete support for some Oracle features and partial support for others. Migration Toolkit cannot migrate any object that uses an unsupported feature.

In some cases, Migration Toolkit can migrate objects that use features that offer partial compatibility. In other cases, Advanced Server supports suitable workarounds.

Full-text search is an example of functionality that is not fully compatible with Oracle. The Advanced Server database has included support for full-text search for quite some time, but the implementation is quite different than Oracle's; Migration Toolkit is unable to migrate objects that utilize this feature.

There are also features that Advanced Server does not yet support. Features in this category include Automated Storage Management, Advanced Queuing, table compression, and external tables. You can often orchestrate a successful workaround:
 - Automated Storage Management can be replaced with (system specific) volume management software.
 - Advanced Queuing can be replaced by external messaging systems such as ActiveMQ, TIBCO or MQ Series.
 - Table compression can be implemented by storing data in a tablespace that resides on a compressed filesystem.

<!-- end list -->
 - External tables don't exist in Advanced Server, but you *can* load flat text files into staging tables in the database. We recommend using the EDB\*Loader utility to load the data into an Advanced Server database quickly.

## Frequently Asked Questions

*Does Migration Toolkit support the migration of packages?*

Migration Toolkit supports the migration of packages from an Oracle database into Advanced Server. See Section 3, *Functionality* *Overview* for information about the migration support offered by Advanced Server.

*Is there a way to transfer only the data from the source database?*

Yes. Data transfer is supported as part of an online or offline migration.

*Does Migration Toolkit support migration of tables that contain data of the CLOB data type?*

Migration Toolkit does support migration of tables containing data of the CLOB type.

*Does Advanced Server support the enum data type?*

Advanced Server does not currently support the enum data type, but will support them in future releases. Until then, you can use a check constraint to restrict the data added to an Advanced Server database. A check constraint defines a list of valid values that a column may take.

The following code sample includes a simple example of a check constraint that restricts the value of a column to one of three dept types; sales, admin or technical.

CREATE TABLE emp (

emp\_id INT NOT NULL PRIMARY KEY,

dept VARCHAR(255) NOT NULL,

CHECK (dept IN ('sales', 'admin', 'technical'))

);

If we test the check constraint by entering a valid dept type, the INSERT statement works without error:

test=\# INSERT INTO emp VALUES (7324, 'sales');

INSERT 0 1

If we try to insert a value not included in the constraint (support), Advanced Server throws an error:

test=\# INSERT INTO emp VALUES (7325, 'support');

ERROR: new row for relation "emp" violates check constraint "emp\_dept\_check"

*Does Advanced Server support materialized views?*

Postgres does not support Oracle compatible materialized views.  To setup a materialized view/summary table in Postgres you must manually create the triggers that maintain the summary table.  Automatic query rewrite is not currently supported; the application must be made aware of the summary table's existence.

***When I try to migrate from a MySQL database that includes a TIME data type, I get the following error: Error Loading Data into Table: Bad format for Time. Does Postgres support MySQL TIME data types?***

Postgres will have no problem storing TIME data types as long as the value of the hour component is not greater than 24.

Unlike Postgres, the MySQL TIME data type will allow you to store a value that represents either a TIME or an INTERVAL value. A value stored in a MySQL TIME column that represents an INTERVAL value could potentially be out of the accepted range of a valid Postgres TIMESTAMP value. If, during the migration process, Postgres encounters a value stored in a TIME data column that it perceives as out of range, it will return an error.